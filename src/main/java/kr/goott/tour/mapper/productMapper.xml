<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.goott.tour.product.ProductDAOInterface">
	<select id="getAllRecord" resultType="kr.goott.tour.product.ProductVO">
		select num, goodCode, travelType, goodName, startArea, destination, travelTerm, goodData, price, reserMin, reserNum, assure1, assure2, assure3, regDate 
		from gt_product
	</select>
	<select id="selectRecord" resultType="kr.goott.tour.product.ProductVO">
		select num, goodName, goodCode, price, travelType, travelTerm, startarea, destination, resermin, resernum, assure1, assure2, assure3, gooddata
		from gt_product
		where goodCode=#{goodCode}
	</select>
	<select id="selectAllSchedule" resultType="kr.goott.tour.product.ScheduleVO">
		 select a.sc_num, a.goodcode, startdate, backdate, userid, jang 
 		 from (select * from gt_schedule where goodCode=#{goodCode}) a 
 		 left join ( select * from gt_basket where userId=#{userId}) b on  a.sc_num=b.sc_num; 
	</select>
	<select id="selectShcedule" resultType="kr.goott.tour.product.ScheduleVO">
		select to_char(startDate, 'YYYY-MM-DD')startDate, to_char(backDate, 'YYYY-MM-DD') backDate
		from gt_schedule
		where sc_num=#{num}
	</select>
	<select id="travelTypeList" resultType="kr.goott.tour.product.ProductVO">
		select num, goodCode, goodName, price, travelType, travelTerm, startarea, destination, resermin, resernum, assure1, assure2, assure3, gooddata
		from gt_product
		where travelType=#{travelType}
	</select>
	<insert id="insertBasket" parameterType="kr.goott.tour.product.BasketVO">
		insert into gt_basket(num, goodCode, sc_num, userId, jang)
		values(gt_jang_sq.nextVal, #{goodCode}, #{sc_num}, #{userId}, ${jang} )
	</insert>
	<delete id="deleteBasket" parameterType="kr.goott.tour.product.BasketVO">
		delete from gt_basket
		where goodCode=#{goodCode} and sc_num=#{sc_num} and userId=#{userId}
	</delete>
</mapper>